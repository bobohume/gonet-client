syntax = "proto3";
package message;

//服务器类型
enum SERVICE{
    NONE= 0;
    CLIENT= 1;
    GATESERVER= 2;//网关,转发服务
    ACCOUNTSERVER=3;//账号
    WORLDSERVER=4;//世界
    ZONESERVER=5;//地图
    WORLDDBSERVER=6;//db
};

enum CHAT{
    MSG_TYPE_WORLD= 0;
    MSG_TYPE_PRIVATE= 1;
    MSG_TYPE_ORG= 2;
    MSG_TYPE_COUNT= 3;
};

//发送标志
enum SEND{
    POINT = 0;//指定集群id
    BALANCE = 1;//负载
    BOARD_CAST = 2;//广播
};

//客户端包头
message Ipacket{
    int32  Stx = 1;
    SERVICE  DestServerType = 2;
    int32  Ckx = 3;
    int64  Id = 4;
}

message PlayerData{
    int64 PlayerID = 1;
    string PlayerName = 2;
    int32 PlayerGold = 3;
}

//rpc 包头
message RpcHead{
    int64  Id = 1;//token
    uint32  SocketId = 2;
    uint32  SrcClusterId = 3;//源集群id
    uint32  ClusterId = 4;//目标集群id
    SERVICE  DestServerType = 5;//目标集群
    SEND SendType = 6;
    string ActorName = 7;
}

//rpc 包
message RpcPacket{
    string FuncName = 1;
    int32 ArgLen = 2;
    RpcHead RpcHead = 3;
    bytes RpcBody = 4;
}

//集群信息
message ClusterInfo{
    SERVICE Type = 1;
    string Ip = 2;
    int32 Port = 3;
    int32 Weight = 4;
    uint32 SocketId = 5;
}

//point3F
message Point3F{
    float  X = 1;
    float  Y = 2;
    float  Z = 3;
}

//移动包
message C_Z_Move{
    Ipacket PacketHead = 1;

    message Move{//正常走
        message Normal{
	       Point3F Pos = 1;
           float  Yaw = 2;
	       float  Duration = 3;
        }

        int32  Mode = 1;
        Normal normal = 2;
    }

    Move move = 2;
}

//skill
message C_Z_Skill{
    Ipacket PacketHead = 1;
    int32 SkillId = 2;
    int64 TargetId = 3;
}

message Z_C_LoginMap{
    Ipacket PacketHead = 1;
    int64 Id = 2;
    Point3F Pos = 3;
    float Rotation = 4;
}

message Z_C_ENTITY{
    Ipacket PacketHead = 1;
    message Entity{
        message DataMask{//初始信息
            message NpcDataMask{//npc
                int32 DataId = 1;//模板id
            }
            message SpellDataMask{//npc
                int32 DataId = 1;//特效id
                int32 LifeTime = 2;//存在事件
                int32 FlySpeed = 3;//飞行速度
            }
            int32 Type = 1;//类型，player(9)，npc(5)
            bool  RemoveFlag = 2;//销毁状态
            NpcDataMask NpcData = 3;//npc初始信息
            SpellDataMask SpellData = 4;//effect初始信息
        }

        message MoveMask{//移动信息
            Point3F Pos = 1;
            float Rotation = 2;
            bool ForceUpdateFlag = 3;//强制拉回
        }

        message StatsMask{//状态
            int32 HP = 1;// 生命
            int32 MP = 2;// 真气
            int32 MaxHP = 3;// 最大生命
            int32 MaxMP = 4;// 最大真气
            int32 PhyDamage = 5;// 物理伤害
            int32 PhyDefence = 6;// 物理防御
            int32 SplDamage = 7;// 法术伤害
            int32 SplDefence = 8;// 法术防御
            int32 Heal = 9;// 治疗
            int32 CriticalTimes = 10;// 暴击全局百分比伤害倍数
            int32 Critical = 11;// 暴击全局百分比几率
            int32 AntiCriticalTimes = 12;// 抗暴击全局百分比伤害倍数
            int32 AntiCritical = 13;// 防暴击全局百分比几率
            int32 Dodge = 14;// 闪避全局百分比几率
            int32 Hit = 15;// 命中全局百分比几率
        }

        int64 Id = 1;//唯一id
        DataMask Data = 2;//初始化信息
        MoveMask Move = 3;//移动
        StatsMask Stats = 4;//基础属性
    }
    repeated Entity EntityInfo = 2;
}

message C_Z_LoginCopyMap{
    Ipacket PacketHead = 1;
    int32	DataId = 2;
}


/*message C_W_Move{
    Ipacket PacketHead = 1;

    message Move{//正常走
        message Normal{
	       Point3F Pos = 1;
           float  Yaw = 2;
	       float  Duration = 3;
        }
        message Path{//飞行
            int32  PathId = 1;
            int32  TimePos = 2;
            int32  MountId = 3;
        }
        message Blink{//闪现
       	    Point3F Pos = 1;
  	        Point3F RPos = 2;
        }
        message Jump{//Jump//BeatFly//Skip//跳跃
    	    Point3F BPos = 1;
            Point3F EPos = 2;
            int32  Duration = 3;
            int32  TimePos = 4;
            int32  UpExDur = 5;
            int32  DownExDur = 6;
            int32  A = 7;
            int32  B = 8;
        }
        message Line{//Line//Charge//BeatBack//击退
            Point3F BPos = 1;
            Point3F EPos = 2;
            int32  Duration = 3;
            int32  TimePos = 4;
        }

        int32  Mode = 1;
        Normal normal = 2;
        Path path = 3;
        Blink link = 4;
        Jump jump = 5;
        Line line = 6;
    }

    Move move = 2;
}*/

//诲
message C_G_LoginResquest{
    Ipacket PacketHead = 1;
	int64 Key = 2;
}

//诲
message G_C_LoginResponse{
    Ipacket PacketHead = 1;
	int64 Key = 2;
}

//诲
message C_A_LoginRequest{
    Ipacket PacketHead = 1;
    string AccountName = 2;
	string Password = 3;
	string BuildNo = 5;
	int64 Key = 6;
	//uint32 Crc = 7;
}

//诲棣
message A_C_LoginResponse{
    Ipacket PacketHead = 1;
    int32  Error = 2;
    string AccountName = 4;
}

//娉ㄥ
message C_A_RegisterRequest{
    Ipacket PacketHead = 1;
    string AccountName = 2;
    string Password = 3;
}

//娉ㄥ棣
message A_C_RegisterResponse{
    Ipacket PacketHead = 1;
    int32	Error = 2;
}

//瑙
message C_W_CreatePlayerRequest{
    Ipacket PacketHead = 1;
    string PlayerName = 2;
    int32  Sex = 3;
}

//瑙棣
message W_C_CreatePlayerResponse{
    Ipacket PacketHead = 1;
    int32 Error = 2;
    int64 PlayerId = 3;
}

//诲娓告
message C_W_Game_LoginRequset{
    Ipacket PacketHead = 1;
    int64	PlayerId =2;
}

//瑙棣
message W_C_SelectPlayerResponse{
    Ipacket PacketHead = 1;
    int64	AccountId = 2;
    repeated PlayerData PlayerData = 3;
}

message C_G_LogoutResponse{
    Ipacket PacketHead = 1;
}

//澶
message C_W_ChatMessage{
    Ipacket PacketHead = 1;
    int64	Sender = 2;
    int64	Recver = 3;
    int32	MessageType = 4;
    string	Message = 5;
}

message W_C_ChatMessage{
    Ipacket PacketHead = 1;
    int64	Sender = 2;
    string	SenderName = 3;
    int64	Recver = 4;
    string	RecverName = 5;
    int32	MessageType = 6;
    string	Message = 7;
}

message W_C_Test{
    repeated int32 Recv = 1;
}